<!DOCTYPE html>
<html>
  <head>
    <title>视频</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
    <script type="text/javascript" charset="utf-8">
        // 建立与服务器的Socket.IO连接
	var socket = io.connect('http://' + document.domain + ':' + location.port);
        // var socket = io.connect(window.location.origin);
  
        // 当Socket.IO连接成功时
        socket.on('connect', function() {
            console.log('已连接到服务器');
            socket.emit('request_new_data');
        });
	socket.on('disconnect', function() {
            console.log('已与服务器断开连接');
        })
  
        // 监听服务器发来的'new_data'事件
        socket.on('new_data', function(data) {
            console.log("Received new data:");
            // 更新数据内容
            var dataDisplay = document.getElementById('data-display');
            dataDisplay.innerText = JSON.stringify(data);
        });
    </script>
  </head>
  <body>
      <div id="data-display">
      </div>
  </body>
</html>

